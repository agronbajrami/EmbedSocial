<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Agron Bajrami</title>
     <link rel="stylesheet" href="style.css">
     <script src="script.js"></script>


</head>

<script>
     const jsonData = [
          {
               name: "Test",
               likes: 25,
               date: "2018-03-12 03:00:00"
          },
          {
               name: "Test1",
               likes: 252,
               date: "2018-03-12 03:00:00"
          }
     ]

     const currentlyLoaded = [
          
     ]
     const monthMapper = {
          1: "Jan",
          2: "Feb",
          3: "Mar"
     }
     const formatDate = (date) => {
          const dateObject = new Date("2018-03-12 03:00:00");

          return dateObject.getDay() + " " + monthMapper[dateObject.getMonth()] + " " + dateObject.getFullYear();
     }
     
     const test = (ele, ind) => {
          currentlyLoaded[ind].isLiked = !currentlyLoaded[ind].isLiked;
          // document.getElementById("data-" + ind).innerHTML = "LIKED";
          document.querySelector(`#data-${ind} div.likes > img`).classList.toggle("myStyle");
          const likesDIv = document.querySelector(`#data-${ind} div.likes span`);
          const likesCOunt = +likesDIv.innerHTML;
          likesDIv.innerHTML = likesCOunt + (currentlyLoaded[ind].isLiked ? +1 : -1);
     }

     let currentPage = 0; // 0-4 
     const getCard = (cardData, index) => {
          return `
               <li class="card" id="data-${index}">
                    <div>${cardData.name}</div>
                    <div class="card_footer}">
                         <div class="likes">
                              <img src="./heart.svg" onclick="test(this, ${index})"/>
                              <span>
                                   ${cardData.likes}
                              </span>
                         </div>
                         <div class="date">
                              ${formatDate(cardData.date)}
                         </div>
                    </div>
               </li>
          `
     }

     const addCards = () => {
          for (let i = currentPage * 1; i < Math.min(currentPage * 1 + 1, jsonData.length); i++) {
          currentlyLoaded.push({
               ...jsonData[i],
               isLiked: false
                         });
          document.getElementById("mainContainer").innerHTML += getCard(currentlyLoaded[i], i);
     }
     currentPage++;
     if (currentlyLoaded.length === jsonData.length) {
          document.getElementById("loadMore").remove()
     }     
}

     addCards();
</script>


<body>
     <div class="container" id="mainContainer">
         
     </div>
     <button id="loadMore" onclick="addCards()">Load MOre</button>
    
</body>


</html>